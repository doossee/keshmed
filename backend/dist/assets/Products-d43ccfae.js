import{d as F,e as L,a as l,o as p,f,w as e,b as a,g as b,t as c,h as r,r as z,l as O,u as Q,n as T,p as G,k as y,q as J,s as K,v as P,c as B,i as A,F as E}from"./index-77affbdd.js";import{l as W}from"./lodash-336d108c.js";import{u as X}from"./vue.f36acd1f-3aaba8e2.js";import{g as Y}from"./products-02c21c87.js";import"./index-26e040f7.js";const Z=F({__name:"AppProductList",props:{product:{type:Object}},setup(m){const{locale:x}=L();return(d,h)=>{const q=l("v-img"),C=l("v-avatar"),n=l("v-list-item-title"),g=l("v-list-item-subtitle"),$=l("v-rating"),s=l("v-list-item");return p(),f(s,{theme:"light",variant:"flat",color:"surface",link:"",to:`/product/${m.product.id}`,border:"",lines:"three",rounded:"",class:"mb-3 pa-2"},{prepend:e(()=>[a(C,{size:"150",rounded:"",color:"grey-lighten-3"},{default:e(()=>{var u,V,i,o;return[a(q,{alt:((u=m.product)==null?void 0:u.title_uz)+" image",src:((o=(i=(V=m.product)==null?void 0:V.images)==null?void 0:i[0])==null?void 0:o.medium_square_crop)||"/img/nophoto.jpg"},null,8,["alt","src"])]}),_:1})]),default:e(()=>[a(n,{class:"text-primary text-body-2"},{default:e(()=>[b(c(m.product.brand.name),1)]),_:1}),a(n,null,{default:e(()=>[b(c(m.product[`title_${r(x)}`]),1)]),_:1}),a(g,{class:"text-caption"},{default:e(()=>[b(c(m.product[`description_${r(x)}`]),1)]),_:1}),a(n,null,{default:e(()=>[a($,{readonly:"","model-value":"0","half-increments":"",density:"compact",color:"amber",size:"small"})]),_:1}),a(n,{class:"text-body-1"},{default:e(()=>[b(c(m.product.price)+" $",1)]),_:1})]),_:1},8,["to"])}}}),ee={class:"d-flex justify-end"},te={class:"text-primary"},ae={class:"text-primary"},oe=["onClick"],le={class:"text-primary"},se={class:"text-center text-grey font-weight-light"},ne={key:0,class:"text-center text-grey font-weight-light"},pe=F({__name:"Products",setup(m){X({title:" Искать Медицинское Оборудование в Узбекистане",meta:[{name:"description",content:"Найдите широкий ассортимент медицинского оборудования в Узбекистане. Качественные товары, высокий уровень сервиса. Покупайте оборудование для здравоохранения у надежных поставщиков."},{name:"keywords",content:"медицинское оборудование, Узбекистан, оборудование для здравоохранения, медицинские товары, медтехника, поставщики, купить оборудование"}]});const x=z(0),d=O(),h=z(!0),{getters:q}=Q(),{locale:C,t:n}=L(),g=z([]),$=T(),s=G({search:d.query.search||"",brand:d.query.brand||"",category:d.query.category||"",min_price:d.query.min_price||0,max_price:d.query.max_price||0,is_part:d.query.is_part||"",page:d.query.page||1}),u=(i,o)=>{if(d.query[i]==o)return;const k={...d.query};o===0||o===""?delete k[i]:k[i]=o,s[i]=o,$.replace({query:k}),V()},V=W.debounce(async()=>{h.value=!0,g.value=[];const{data:i}=await Y(location.search?location.search+"&expand=images":"?expand=images");g.value=i.results,x.value=i.count,h.value=!1},500);return V(),(i,o)=>{const k=l("v-switch"),_=l("v-card-text"),U=l("v-text-field"),w=l("v-col"),N=l("v-row"),M=l("v-icon"),j=l("v-list"),R=l("v-list-item"),S=l("v-card"),D=l("v-pagination"),H=l("v-container");return p(),f(H,null,{default:e(()=>[a(N,null,{default:e(()=>[a(w,{cols:"12",sm:"4",class:"pr-0"},{default:e(()=>[a(S,{flat:"",border:""},{default:e(()=>[a(_,{class:"w-100 text-primary d-flex justify-space-between align-center"},{default:e(()=>[y("span",null,c(r(n)("products.search_by_name")),1),y("div",ee,[a(k,{modelValue:s.is_part,"onUpdate:modelValue":[o[0]||(o[0]=t=>s.is_part=t),o[1]||(o[1]=t=>u("is_part",t))],"hide-details":"",density:"compact",color:"primary","false-value":"","true-value":!0,label:r(n)("admin.is_part")},null,8,["modelValue","label"])])]),_:1}),a(_,{class:"py-0 pb-1"},{default:e(()=>[a(U,{placeholder:r(n)("products.search_by_name"),"append-inner-icon":"mdi-magnify",flat:"",density:"compact",class:"border rounded","hide-details":"",variant:"solo","bg-color":"background",color:"primary",modelValue:s.search,"onUpdate:modelValue":[o[2]||(o[2]=t=>s.search=t),o[3]||(o[3]=t=>u("search",t))]},null,8,["placeholder","modelValue"])]),_:1}),a(_,{class:"pb-0 pt-2"},{default:e(()=>[y("span",te,c(r(n)("products.search_by_price")),1)]),_:1}),a(_,{class:"pb-0 pt-2 px-3"},{default:e(()=>[a(N,{class:"pa-2"},{default:e(()=>[a(w,{class:"pa-2",cols:"6"},{default:e(()=>[a(U,{min:"0",modelValue:s.min_price,"onUpdate:modelValue":[o[4]||(o[4]=t=>s.min_price=t),o[5]||(o[5]=t=>u("min_price",+t))],"bg-color":"background",class:"border rounded",type:"number",variant:"solo",flat:"","hide-details":"",density:"compact",placeholder:r(n)("products.min")},null,8,["modelValue","placeholder"])]),_:1}),a(w,{class:"pa-2",cols:"6"},{default:e(()=>[a(U,{min:"0",modelValue:s.max_price,"onUpdate:modelValue":[o[6]||(o[6]=t=>s.max_price=t),o[7]||(o[7]=t=>u("max_price",+t))],"bg-color":"background",class:"border rounded",type:"number",variant:"solo",flat:"","hide-details":"",density:"compact",placeholder:r(n)("products.max")},null,8,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1}),a(_,{class:"pb-0"},{default:e(()=>[y("span",ae,c(r(n)("products.categories")),1)]),_:1}),a(_,{class:"py-0"},{default:e(()=>[a(j,{items:r(q).categories,"item-children":"children","item-title":`name_${r(C)}`,density:"compact",nav:"",class:"px-0","open-strategy":"single","item-value":"id",mandatory:"",modelValue:s.category,"onUpdate:modelValue":o[8]||(o[8]=t=>s.category=t),"active-class":"text-primary"},{title:e(({title:t,item:v})=>[y("span",{class:J(["font-weight-light text-hover-link",{"text-primary":s.category===v.id}]),onClick:K(I=>u("category",v.id),["stop"])},c(t),11,oe)]),append:e(({item:t,isActive:v})=>[t.children.length?(p(),f(M,{key:0},{default:e(()=>[b("mdi-"+c(v?"minus":"plus"),1)]),_:2},1024)):P("",!0)]),_:1},8,["items","item-title","modelValue"])]),_:1}),a(_,{class:"py-0"},{default:e(()=>[y("span",le,c(r(n)("products.brands")),1)]),_:1}),a(_,{class:"py-0"},{default:e(()=>[a(j,{density:"compact",nav:"",class:"px-0",mandatory:"",color:"primary"},{default:e(()=>[(p(!0),B(E,null,A(r(q).brands,(t,v)=>(p(),f(R,{class:"py-0",key:v,active:s.brand===t.id,height:"25",value:t.id,link:"",onClick:I=>u("brand",t.id)},{default:e(()=>[b(c(t.name),1)]),_:2},1032,["active","value","onClick"]))),128))]),_:1})]),_:1})]),_:1})]),_:1}),h.value?(p(),f(w,{key:0,cols:"12",sm:"8"},{default:e(()=>[y("p",se,c(r(n)("loading"))+"...",1)]),_:1})):(p(),f(w,{key:1,cols:"12",sm:"8"},{default:e(()=>[a(j,{class:"py-0 px-0","bg-color":"background"},{default:e(()=>[!h.value&&g.value.length===0?(p(),B("p",ne,c(r(n)("no_data")),1)):P("",!0),(p(!0),B(E,null,A(g.value,(t,v)=>(p(),f(Z,{key:v,product:t},null,8,["product"]))),128))]),_:1}),a(D,{density:"comfortable",length:Math.ceil(x.value/25),"model-value":+s.page,"onUpdate:modelValue":o[9]||(o[9]=t=>u("page",t)),variant:"flat","active-color":"primary"},null,8,["length","model-value"])]),_:1}))]),_:1})]),_:1})}}});export{pe as default};
