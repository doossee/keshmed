import{l as M}from"./lodash-336d108c.js";import{u as R}from"./vue-i18n-2afed284.js";import{a as T,g as A}from"./orders-91bd937d.js";import{d as F,r as m,c as k,b as s,f as G,g as a,e as J,E as l,u as p,_ as V,a1 as c,m as i}from"./@vue-94c9cb71.js";import"./@intlify-eb5de8e7.js";import"./index-2f7155ba.js";import"./axios-28bc18a3.js";import"./index-8a372a89.js";import"./vue-router-4d1c7fe2.js";import"./vuex-76c3bf40.js";import"./vuetify-28085d18.js";import"./@splidejs-a53e45e1.js";import"./@unhead-e9381f0c.js";import"./unhead-98eeea87.js";import"./hookable-e7fd869b.js";const K={class:"responsive-datatable"},Q=["data-label"],W=["data-label"],X=["data-label"],Y=["data-label"],Z=["data-label"],ee=["data-label"],he=F({__name:"Orders",setup(te){const{t:_,locale:w}=R(),v=m(""),d=m([]),u=m(1),r=m(25),f=m(0),y=m(!1),S=[{title:"products.first_name",key:"name",sortable:!1},{title:"admin.product",key:"product",sortable:!1},{title:"products.phone",key:"phone",sortable:!1},{title:"admin.order_message",key:"message",sortable:!1},{title:"admin.date",key:"date",sortable:!1},{title:"admin.status",key:"status",sortable:!1}],U=k(()=>{const t=new URLSearchParams;return u.value&&t.append("page",String(u.value)),r.value&&t.append("limit",String(r.value)),v.value.trim()&&t.append("search",v.value),t.toString()}),C=k(()=>{const t=(u.value-1)*r.value;return`${t+1}-${t+d.value.length} / ${f.value}`}),$=M.debounce(t=>{v.value=t,u.value=1},500),B=k(()=>S.map(t=>({...t,title:_(t.title)}))),N=async(t,o)=>{const{data:g}=await T(t,{country:d.value[o].country,first_name:d.value[o].first_name,last_name:d.value[o].last_name,message:d.value[o].message,phone:d.value[o].phone,checked:!0,product:d.value[o].product.id});g&&(d.value[o].checked=!0,alert("Successfully checked order"))},x=async()=>{y.value=!0;const{data:t}=await A(U.value);d.value=t.results,f.value=t.count,y.value=!1};return(t,o)=>{const g=s("v-text-field"),h=s("v-col"),O=s("v-card-title"),P=s("v-icon"),j=s("v-chip"),z=s("v-data-table-server"),D=s("v-card-text"),E=s("v-card"),I=s("v-select"),L=s("v-pagination"),q=s("v-row"),H=s("v-container");return J(),G(H,{fluid:""},{default:a(()=>[l(q,{justify:"space-between",align:"center"},{default:a(()=>[l(h,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:a(()=>[l(g,{"bg-color":"surface","onUpdate:modelValue":p($),placeholder:p(_)("admin.search"),"append-inner-icon":"mdi-magnify","hide-details":"",flat:"",density:"compact",variant:"solo",class:"border rounded"},null,8,["onUpdate:modelValue","placeholder"])]),_:1}),l(h,{cols:"12"},{default:a(()=>[l(E,{flat:"",border:""},{default:a(()=>[l(O,{class:"px-4 pt-3 font-weight-light"},{default:a(()=>[V(c(p(_)("admin.orders")),1)]),_:1}),l(D,{class:"px-0"},{default:a(()=>[i("div",K,[l(z,{"items-per-page":r.value,"onUpdate:itemsPerPage":o[0]||(o[0]=e=>r.value=e),search:v.value,"items-length":f.value,loading:y.value,"loading-text":p(_)("loading")+"...","no-data-text":p(_)("no_data"),hover:"",items:d.value,"item-value":"id","onUpdate:options":x,headers:B.value,density:"comfortable"},{bottom:a(()=>[]),"item.name":a(({item:e,column:n})=>[i("td",{"data-label":n.title},c(e.first_name)+" "+c(e.last_name),9,Q)]),"item.message":a(({item:e,column:n})=>[i("td",{"data-label":n.title},c(e.message),9,W)]),"item.product":a(({item:e,column:n})=>{var b;return[i("td",{"data-label":n.title},c((b=e.product)==null?void 0:b[`title_${p(w)}`]),9,X)]}),"item.phone":a(({item:e,column:n})=>[i("td",{"data-label":n.title},c(e.phone),9,Y)]),"item.date":a(({item:e,column:n})=>[i("td",{"data-label":n.title},c(new Date(e.created_at).toLocaleString()),9,Z)]),"item.status":a(({item:e,column:n,index:b})=>[i("td",{"data-label":n.title},[l(j,{variant:"flat",disabled:e.checked,color:e.checked?"green":"red",onClick:ae=>N(e.id,b)},{default:a(()=>[l(P,null,{default:a(()=>[V("mdi-check"+c(e.checked?"-all":""),1)]),_:2},1024)]),_:2},1032,["disabled","color","onClick"])],8,ee)]),_:1},8,["items-per-page","search","items-length","loading","loading-text","no-data-text","items","headers"])])]),_:1})]),_:1})]),_:1}),l(h,{cols:"12",sm:"5",class:"pt-0 pb-1 d-flex align-center"},{default:a(()=>[l(I,{"bg-color":"surface",modelValue:r.value,"onUpdate:modelValue":o[1]||(o[1]=e=>r.value=e),transition:"fade-transition","hide-details":"",flat:"",density:"compact",variant:"solo",class:"border rounded",items:[10,25,50,100,150]},null,8,["modelValue"]),l(g,{"bg-color":"surface","hide-details":"",flat:"",density:"compact",variant:"solo",class:"border rounded ml-3","model-value":C.value,readonly:""},null,8,["model-value"])]),_:1}),l(h,{cols:"12",sm:"4",md:"4",class:"pt-0 pl-0 pb-1 pr-2 d-flex justify-end align-center"},{default:a(()=>[l(L,{"bg-color":"surface",modelValue:u.value,"onUpdate:modelValue":[o[2]||(o[2]=e=>u.value=e),x],length:Math.ceil(f.value/r.value),"active-color":"primary",size:"40","total-visible":"3",variant:"flat"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})}}});export{he as default};
